<!DOCTYPE html>
<html>
<head>
  <style>
    .slider-container {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      width: 300px;
      margin-bottom: 20px;
    }

    .slider {
      width: 100%;
      height: 10px;
      background-color: #ddd;
      position: relative;
      margin-bottom: 5px;
    }

    .slider-bar {
      height: 100%;
      background-color: #4CAF50;
    }

    .slider-handle {
      width: 10px;
      height: 20px;
      background-color: #4CAF50;
      position: absolute;
      top: -5px;
      transform: translateX(-50%);
      cursor: pointer;
    }

    .slider-value {
      position: absolute;
      bottom: -20px;
      font-size: 12px;
      color: #333;
    }
  </style>
</head>
<body>
  <div class="slider-container">
    <div class="slider" id="slider1">
      <div class="slider-bar"></div>
      <div class="slider-handle"></div>
      <div class="slider-value"></div>
    </div>
    <div class="slider" id="slider2">
      <div class="slider-bar"></div>
      <div class="slider-handle"></div>
      <div class="slider-value"></div>
    </div>
    <div class="slider" id="slider3">
      <div class="slider-bar"></div>
      <div class="slider-handle"></div>
      <div class="slider-value"></div>
    </div>
  </div>

  <script>
    var sliders = [
      { id: 'slider1', value: 0, max: 100 },
      { id: 'slider2', value: 0, max: 100 },
      { id: 'slider3', value: 0, max: 100 }
    ];

    sliders.forEach(function(slider, index) {
      var sliderElement = document.getElementById(slider.id);
      var barElement = sliderElement.querySelector('.slider-bar');
      var handleElement = sliderElement.querySelector('.slider-handle');
      var valueElement = sliderElement.querySelector('.slider-value');

      function updateSlider() {
        var totalMax = 100;

        for (var i = 0; i < sliders.length; i++) {
          totalMax -= sliders[i].value;
        }

        slider.max = totalMax;

        var percentage = slider.value / slider.max * 100;

        barElement.style.width = percentage + '%';
        handleElement.style.left = percentage + '%';
        valueElement.textContent = slider.value + '%';

        // Update the max value of the remaining sliders
        updateRemainingSliders(index);
      }

      function updateRemainingSliders(index) {
        for (var i = index + 1; i < sliders.length; i++) {
          sliders[i].max = 100 - sliders[i - 1].value;
        }
      }

      handleElement.addEventListener('mousedown', function(event) {
        event.preventDefault();

        document.addEventListener('mousemove', moveHandle);
        document.addEventListener('mouseup', stopMovingHandle);
      });

      function moveHandle(event) {
        var sliderRect = sliderElement.getBoundingClientRect();
        var offsetX = event.clientX - sliderRect.left;
        var percentage = (offsetX / sliderRect.width) * 100;

        slider.value = Math.round((percentage / 100) * slider.max);

        updateSlider();
      }

      function stopMovingHandle() {
        document.removeEventListener('mousemove', moveHandle);
        document.removeEventListener('mouseup', stopMovingHandle);
      }

      updateSlider();
    });
  </script>
</body>
</html>
